(this.webpackJsonpcolorify=this.webpackJsonpcolorify||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(34)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(6),o=n.n(c),l=(n(20),a.a.memo((function(){return a.a.createElement("nav",{className:"top-panel"},a.a.createElement("div",{className:"top-panel__wrapper"},a.a.createElement("header",{className:"top-panel__project-name"},"colorify")))}))),u=n(5),i=(n(21),a.a.memo((function(e){var t=e.children,n=e.type,r=e.disabled,c=e.onClick;return a.a.createElement("button",{className:"simple-button",type:n,disabled:r,onClick:c},t)}))),s=(n(22),function(){return a.a.createElement("div",{className:"loader"},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null))}),p=n(7),m=n(12);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var b=function e(){Object(m.a)(this,e)};b.rgbToHex=function(e){return(e.red<<16|e.green<<8|e.blue).toString(16)},b.rgbToHSL=function(e){var t=e.red,n=e.green,r=e.blue;t/=255,n/=255,r/=255;var a=Math.min(t,n,r),c=Math.max(t,n,r),o=c-a,l=0,u=0;return l=0===o?0:c===t?(n-r)/o%6:c===n?(r-t)/o+2:(t-n)/o+4,(l=Math.round(60*l))<0&&(l+=360),u=(c+a)/2,{hue:l,saturation:+(100*(0===o?0:o/(1-Math.abs(2*u-1)))).toFixed(1),lightness:u=+(100*u).toFixed(1)}},b.getColors=function(e){return new Promise((function(t){for(var n={},r=0;r<300;r++)for(var a=0;a<150;a++){var c=e.getImageData(r,a,1,1).data,o=Object(u.a)(c,3),l={red:o[0],green:o[1],blue:o[2]},i="#"+("000000"+b.rgbToHex(l)).slice(-6),s=b.rgbToHSL(l);n[i]={amount:n[i]?n[i].amount+1:1,HSL:s}}var m=Object.keys(n).map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({HEX:e},n[e])})).sort((function(e,t){return e.amount-t.amount})).reverse();m.forEach((function(e){var t=e.HSL,n=t.hue,r=t.lightness;m=m.filter((function(t){var a=t.HSL,c=a.hue,o=a.lightness;return o>r||o<r?t:c>n-10&&c<n+10&&t!==e?null:t}))})),t(m.splice(0,25))}))};var d,O=n(4);!function(e){e.UPLOAD_IMAGE="UPLOAD_IMAGE",e.CALCULATE_COLORS="CALCULATE_COLORS",e.CLEAR_IMAGE="CLEAR_IMAGE"}(d||(d={}));n(28);var g=function(e){var t=e.image,n=Object(r.useState)(!1),c=Object(u.a)(n,2),o=c[0],l=c[1],p=Object(O.b)(),m=Object(r.useRef)(null),f=Object(r.useRef)(null),g=Object(r.useRef)(null),E=Object(r.useCallback)((function(){f.current.click()}),[]),v=Object(r.useCallback)((function(e){var t=new FileReader,n=g.current.getContext("2d"),r=m.current,a=Object(u.a)(e.target.files,1)[0];r.onload=function(){n.drawImage(r,0,0,300,150),b.getColors(n).then((function(e){p(function(e){return{type:d.UPLOAD_IMAGE,payload:e}}(n)),p(function(e){return{type:d.CALCULATE_COLORS,payload:e}}(e))}))},t.onloadstart=function(){l(!0)},t.onload=function(){l(!1),r.src=t.result},a&&t.readAsDataURL(a)}),[p]);return a.a.createElement("section",{className:"upload-panel"},a.a.createElement("div",{className:"upload-panel__top-panel"},o?a.a.createElement(s,null):a.a.createElement(i,{onClick:t?function(){p({type:d.CLEAR_IMAGE}),l(!1);var e=g.current.getContext("2d"),t=m.current;e.clearRect(0,0,300,150),t.src=""}:E},t?"Clear":"Upload")),a.a.createElement("input",{className:"upload-panel__loader",ref:f,type:"file",accept:"image/*",onChange:v}),a.a.createElement("canvas",{className:"upload-panel__loader",ref:g}),a.a.createElement("img",{className:"upload-panel__image".concat(t?" loaded":""),ref:m,alt:""}))},E=(n(29),function(e){var t=e.color.HEX,n={backgroundColor:t};return a.a.createElement("div",{className:"colors-panel__color",onClick:function(e){var t=e.target,n=document.createRange();n.selectNode(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(n),document.execCommand("copy")},style:n},t)}),v=(n(30),function(e){var t=e.colors;return a.a.createElement("section",{className:"colors-panel"},t.map((function(e,t){return a.a.createElement(E,{key:t,color:e})})))}),j=(n(31),function(){var e=Object(O.c)((function(e){return e.app})),t=e.image,n=e.colors;return a.a.createElement("main",{className:"main-panel"},a.a.createElement(g,{image:t}),t&&a.a.createElement(v,{colors:n}))}),y=(n(32),function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(l,null),a.a.createElement(j,null))}),h=n(2);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L={image:null,colors:[]},_=Object(h.combineReducers)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.UPLOAD_IMAGE:return A({},e,{image:t.payload});case d.CALCULATE_COLORS:return A({},e,{colors:t.payload});case d.CLEAR_IMAGE:return A({},L);default:return e}}}),w=n(14),P=(n(33),Object(h.createStore)(_,Object(w.composeWithDevTools)(Object(h.applyMiddleware)())));o.a.render(a.a.createElement(O.a,{store:P},a.a.createElement(y,null)),document.getElementById("root"))}],[[15,1,2]]]);
//# sourceMappingURL=main.7bb0c787.chunk.js.map